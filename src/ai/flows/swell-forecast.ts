// This file is generated by Firebase Studio.
'use server';

/**
 * @fileOverview Provides a GenAI-powered summary of swell forecasts for surfers.
 *
 * - getSwellForecast - A function that generates a swell forecast summary.
 * - SwellForecastInput - The input type for the getSwellForecast function.
 * - SwellForecastOutput - The return type for the getSwellForecast function.
 */

import {ai} from '@/ai/genkit';
import {z} from 'genkit';

const SwellForecastInputSchema = z.object({
  surfSpot: z.string().describe('The name of the surf spot to get the swell forecast for.'),
});
export type SwellForecastInput = z.infer<typeof SwellForecastInputSchema>;

const SwellForecastOutputSchema = z.object({
  forecastSummary: z.string().describe('A summary of the swell forecast for the specified surf spot, including wave height, period, wind, and tide information. It should also advise the user whether, when and where to go surfing, citing to expert blogs, forecasts or historical performance in its answer.'),
});
export type SwellForecastOutput = z.infer<typeof SwellForecastOutputSchema>;

export async function getSwellForecast(input: SwellForecastInput): Promise<SwellForecastOutput> {
  return swellForecastFlow(input);
}

const swellForecastPrompt = ai.definePrompt({
  name: 'swellForecastPrompt',
  input: {schema: SwellForecastInputSchema},
  output: {schema: SwellForecastOutputSchema},
  prompt: `You are an expert surf forecaster, providing summaries for surfers who want to know where and when to surf.  Provide a summary of the swell forecast for {{{surfSpot}}}, including wave height, wave period, wind speed/direction, and tide information. Advise the user whether, when and where to go surfing, citing to expert blogs, forecasts or historical performance in your answer.`,
});

const swellForecastFlow = ai.defineFlow(
  {
    name: 'swellForecastFlow',
    inputSchema: SwellForecastInputSchema,
    outputSchema: SwellForecastOutputSchema,
  },
  async input => {
    const {output} = await swellForecastPrompt(input);
    return output!;
  }
);
